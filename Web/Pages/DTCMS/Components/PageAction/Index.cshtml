@model Web.Pages.DTCMS.Components.PageAction.PageActionModel
@inject IStringLocalizer<ResourceLibrary.Panel.Common.PageAction.PageAction> Localizer;
@inject IStringLocalizer<ResourceLibrary.Panel.Common.Global.Global> GlobalLocalizer;
@{
    string AddBtnClass = "";
    if(Model.hasAdd == false)
    {
        AddBtnClass += "opacity-0";
    }
}

<div class="absolute top-0 left-0 h-screen w-screen bg-red-500 opacity-0 hidden  z-10 " id="searchOverlay"  onclick="hideSearchBar()" ></div>
<main class=" relative">
    <form method="get">
        <div class="@(string.IsNullOrEmpty(Model.Search)? "hidden":"")  w-[50%] absolute top-0 z-10 rtl:left-0 ltr:right-0" id="searchBarContainer">
            <button class="absolute top-2 z-30 ltr:right-4 rtl:left-4">
                <span class="icon-Search text-xl text-gray-500"></span>
            </button>
            <input type="text" asp-for="Search"  id="searchInput" onchange="handleSearch()"  placeholder="@Localizer["Search"]"
                   class="ltr:text-left rtl:text-right appearance-none block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm z-20 relative" />
            @if(Model.SearchFilterQuery == null)
            {
                <input type="hidden" name="filter" value="" query="title" id="search__filter" />
            }
            else
            {
                <input type="hidden" name="filter" value="" query="@Model.SearchFilterQuery" id="search__filter" />
            }
            
                 
           </div>
    </form>
   
    <div class="flex justify-between items-center">
        <div class="">
         
                <a type="button" href="/dtcms/@Model.pageName/upsert" id="pageAdder"
               class="@AddBtnClass inline-flex items-center px-5 py-2.5 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-700">
                    <span class="ml-1 text-3xl leading-4 font-light">+</span>
                    @Localizer["Add"]

                </a>
          

            <button type="submit" id="groupRemover" data-sheet-control="group__delete__sheet"
                    class="h-[36px] inline-flex items-center px-5 py-2.5 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800 hidden">
                <span class="ml-2 text-3xl leading-4 font-light">
                    <span class="icon-Trash text-xl text-white"></span>
                </span>
                @Localizer["GroupDelete"]
            </button>

            <dt:bottom-sheet id="group__delete__sheet" min-height="27">
                <form asp-page-handler="Delete" method="post" id="delete__group">
                    <div class="">
                        <h5 class="text-center mb-4 text-base font-semibold">
                            @GlobalLocalizer["MultiDeleteText"]
                        </h5>
                        <div class="flex items-center justify-between w-full mt-9">
                            <button type="submit" class="focus:outline-none text-white bg-red-600 hover:bg-red-400 focus:ring-4 focus:ring-red-100 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"> @GlobalLocalizer["Delete"] </button>
                            <span data-sheet-dismiss class="cursor-pointer py-2.5 px-5 mr-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 close-sheet ">@GlobalLocalizer["Cancel"] </span>
                        </div>
                    </div>
                </form>
            </dt:bottom-sheet>

          
        </div>
        <div class=" flex items-center rtl:flex-row ltr:flex-row-reverse">

            @if (Model.hasSearch)
            {
                <button class="mr-3" onclick="showSearchBar()">
                    <span class="icon-Search text-2xl text-gray-700"></span>
                </button>
            }


            @if (Model.hasFilter)
            {
                <button class="mr-3">
                    <span class="icon-Filter text-2xl text-gray-700"></span>
                </button>
            }


        </div>
    </div>

</main>